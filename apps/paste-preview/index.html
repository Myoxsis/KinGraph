<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>KinGraph Workbench â€” Records</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body data-page="records">
    <main>
      <header class="header">
        <div class="header-meta">
          <h1>KinGraph Workbench</h1>
          <p class="status">
            Extract structured records from pasted HTML, link them to individuals, and explore saved data to power your
            genealogical linkage work.
          </p>
        </div>
        <nav class="tabs" role="tablist">
          <a class="tab is-active" href="./index.html">Records</a>
          <a class="tab" href="./individuals.html">Individuals</a>
          <a class="tab" href="./tree.html">Tree</a>
          <a class="tab" href="./settings.html">Settings</a>
        </nav>
      </header>

      <section class="view">
        <div class="layout">
          <section class="panel stack">
            <header>
              <h2>Source extraction</h2>
            </header>
            <div>
              <label for="html-input">Source HTML</label>
              <textarea id="html-input" placeholder="Paste HTML here..."></textarea>
            </div>
            <div class="action-row">
              <button id="toggle-sources" type="button" disabled>Highlight sources</button>
              <button id="reextract" type="button" class="button-secondary" disabled>Relaunch extract</button>
            </div>
            <iframe id="source-preview" title="Provenance preview" hidden></iframe>
          </section>

          <section class="panel stack">
            <header>
              <h2>Extracted record</h2>
              <span id="provenance-count" class="pill" hidden></span>
            </header>
            <div>
              <label for="json-output">Structured record</label>
              <div id="json-output" class="json-viewer" data-empty="true">Paste HTML to see extracted fields.</div>
            </div>
            <div id="error" class="error" hidden></div>
            <div>
              <label>Field confidence</label>
              <div id="confidence" class="confidence-list"></div>
            </div>
          </section>
        </div>

        <div class="secondary-grid">
          <section class="panel" id="save-panel">
            <header>
              <h2>Save record</h2>
            </header>
            <p class="supporting-text">
              Create a brand new individual or link the extracted record to someone you have already captured.
            </p>
            <form id="save-form">
              <fieldset>
                <div class="choice">
                  <label>
                    <input type="radio" name="save-mode" id="save-mode-new" value="new" checked />
                    Create a new individual
                  </label>
                  <div class="control">
                    <label for="new-individual-name">Individual name</label>
                    <input type="text" id="new-individual-name" name="new-individual-name" />
                  </div>
                </div>
                <div class="choice">
                  <label>
                    <input type="radio" name="save-mode" id="save-mode-existing" value="existing" />
                    Link to an existing individual
                  </label>
                  <div class="control">
                    <label for="existing-individual-select">Choose individual</label>
                    <select id="existing-individual-select" name="existing-individual"></select>
                  </div>
                </div>
              </fieldset>
              <div class="card-actions">
                <button type="submit" id="save-button">Save record</button>
                <span id="save-feedback" class="supporting-text" aria-live="polite"></span>
              </div>
            </form>
          </section>

          <section class="panel">
            <header>
              <h2>Saved records</h2>
              <button type="button" id="clear-records" class="button-secondary">Clear all</button>
            </header>
            <div id="saved-records" class="saved-records-list"></div>
          </section>
        </div>
      </section>
    </main>

    <script type="module" src="./main.ts"></script>
  </body>
</html>
